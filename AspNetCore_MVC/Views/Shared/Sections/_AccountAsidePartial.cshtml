@model AccountIndexViewModel

@{
    var user = await UserManager.GetUserAsync(User);
}

<aside>
    <div class="profile">
        <form enctype="multipart/form-data" method="post" asp-action="UploadImage" asp-controller="Account">
            <div class="img-btn">
                <p class="tool-tip">Update</p>
                <label for="fileUploader" class="updateAvatarBtn"><i class="fa-solid fa-arrows-rotate-reverse"></i></label>
            </div>
            <img class="profile-avatar" src="~/uploads/@user!.ProfileImage" alt="Profile image">
            <input type="file" id="fileUploader" name="file" hidden/>
        </form>
        <h5 class="header5">@($"{Model.ProfileInfo.FirstName} {Model.ProfileInfo.LastName}")</h5>
        <p class="m-text">@Model.ProfileInfo.Email</p>
    </div>
    <div class="buttons">
        <a id="aside-btn-1" class="@btnClass("Index", "SaveBasicInfo", "SaveAddressInfo")" asp-controller="Account" asp-action="Index"><i class="fa-light fa-gear-complex"></i> Account Details</a>
        <a id="aside-btn-2" class="@btnClass("Security", "DeleteAccount", "")" asp-controller="Account" asp-action="Security"><i class="fa-regular fa-lock"></i> Security</a>
        <a id="aside-btn-3" class="@btnClass("SavedCourses", "", "")" asp-controller="Account" asp-action="SavedCourses"><i class="fa-regular fa-bookmark"></i> Saved Courses</a>
        <a id="aside-btn-4" class="transparent-btn" asp-controller="Auth" asp-action="SignOut"><i class="fa-regular fa-right-from-bracket"></i>Sign Out</a>
    </div>
</aside>

@{
    string btnClass(string actionName1, string actionName2, string actionName3)
    {
        var action = ViewContext.RouteData.Values["action"] as string;

        if ((action == actionName1) || (action == actionName2) || (action == actionName3))
        {
            return "theme-btn";
        }
        else
        {
            return "transparent-btn";
        }
    }
}

@await Html.PartialAsync("~/Views/Shared/_AccountSaveImagePartial.cshtml")